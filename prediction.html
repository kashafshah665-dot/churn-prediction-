<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GYM CHURN Â· Prediction</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">


<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    
}
body{
    background:#061127;
    display:flex;
    min-height:100vh;
    color:#e1e9f0;
}

/* ===== SIDEBAR ===== */
.sidebar{
    width:260px;
    background:#10141c;
    border-right:1px solid #222a36;
    padding:2rem 1.2rem;
    display:flex;
    flex-direction:column;
}
.logo-area {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 3rem;
    font-family: 'Inter', sans-serif;
}

.logo-area i {
    font-size: 1.8rem;
    color: #3b82f6;
}

.logo-area span {
    font-family: 'Inter', sans-serif;
    font-weight: 600;
    font-size: 1.1rem;
    line-height: 1.3;
    letter-spacing: -0.3px;
    color: #e2e8f0;
}

.nav{
    display:flex;
    flex-direction:column;
    gap:10px;
    flex:1;
}
.nav-item{
    display:flex;
    align-items:center;
    gap:14px;
    padding:12px 16px;
    border-radius:14px;
    font-weight:500;
    color:#8e9aaf;
    cursor:pointer;
}
.nav-item:hover{
    background:#1a212b;
    color:#ccddf8;
}
.nav-item.active{
    background:#1f2a37;
    color:white;
    border-left:3px solid #3b82f6;
}
.user-tag{
    margin-top:auto;
    border-top:1px solid #1f2937;
    padding-top:1.5rem;
    display:flex;
    gap:10px;
    font-size:0.9rem;
}
.avatar{
    background:#252f3f;
    border-radius:20px;
    padding:6px 10px;
    color:#bdd3ff;
}

/* ===== MAIN ===== */
.main{
    flex:1;
    padding:2.2rem 2.5rem;
}
.page-header{
    margin-bottom:2rem;
}
.page-header h1{
    font-size:2rem;
    font-weight:600;
    background:linear-gradient(135deg,#ffffff,#bdd3ff);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
}
.page-header p{
    color:#6f7d98;
    margin-top:6px;
}

/* ===== FORM CARD ===== */
.prediction-card{
    background:#131823;
    border-radius:28px;
    padding:2rem;
    border:1px solid #263040;
    max-width:750px;
}
.input-grid{
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:1.5rem;
}
.input-field{
    display:flex;
    flex-direction:column;
    gap:6px;
}
.input-field label{
    font-size:0.8rem;
    text-transform:uppercase;
    color:#8b9bb5;
}
.input-field input,
.input-field select{
    background:#1e2633;
    border:1px solid #2c3648;
    border-radius:14px;
    padding:12px 14px;
    color:#f0f4fe;
    outline:none;
}
.input-field input:focus,
.input-field select:focus{
    border-color:#3b82f6;
}
.predict-btn{
    margin-top:20px;
    background:linear-gradient(145deg,#2563eb,#3b82f6);
    border:none;
    padding:14px;
    border-radius:30px;
    color:white;
    font-weight:600;
    cursor:pointer;
}
.predict-btn:hover{
    transform:scale(1.02);
}

/* ===== RESULT CARD ===== */
.result-container{
    margin-top:25px;
    display:none;
}
.result-card{
    background:#0f172a;
    padding:1.5rem;
    border-radius:20px;
    border:1px solid #2b3b54;
    display:flex;
    justify-content:space-between;
    align-items:center;
}
.prediction-value{
    font-size:1.8rem;
    font-weight:700;
}
.churn-badge{
    background:rgba(239,68,68,0.2);
    color:#f87171;
    padding:5px 15px;
    border-radius:50px;
}
.renew-badge{
    background:rgba(34,197,94,0.2);
    color:#4ade80;
    padding:5px 15px;
    border-radius:50px;
}
.prob-value{
    font-size:1.6rem;
    font-weight:700;
}
</style>
</head>

<body>
    

<aside class="sidebar">
    <div class="logo-area">
        <i class="fas fa-dumbbell"></i>
        <span>
            Gym Customer<br>
            Churn Prediction
        </span>
    </div>

    <div class="nav">
        <div class="nav-item" onclick="window.location.href='/dashboard';">
            ðŸ“Š Overview
        </div>
        <div class="nav-item active">
            ðŸ”® Prediction
        </div>
        <div class="nav-item" onclick="window.location.href='/suggestions';">
            ðŸ’¡ Suggestions
        </div>
    </div>

    
</aside>

<!-- MAIN -->
<main class="main">

<div class="page-header">
    <h1>Churn Risk Scan</h1>
    <p>Enter member data to predict churn probability</p>
</div>

<div class="prediction-card">
<form onsubmit="event.preventDefault(); submitPrediction();">

<div class="input-grid">

    <!-- AGE -->
    <div class="input-field">
        <label>ðŸŽ‚ AGE</label>
        <input type="number" id="age" placeholder="e.g. 28" required>
    </div>

    <!-- GENDER -->
    <div class="input-field">
        <label>ðŸ‘¤ GENDER</label>
        <select id="gender" required>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
        </select>
    </div>

    <!-- SUBSCRIPTION LENGTH -->
    <div class="input-field">
        <label>SUBSCRIPTION LENGTH</label>
        <input type="number" id="subscription_length" required>
    </div>

    <!-- MEMBERSHIP TYPE -->
    <div class="input-field">
        <label>MEMBERSHIP TYPE</label>
        <select id="membership_type">
            <option value="1">1 Month</option>
            <option value="3">3 Months</option>
            <option value="6">6 Months</option>
            <option value="12">12 Months</option>
        </select>
    </div>

    <!-- MONTHLY VISITS -->
    <div class="input-field">
        <label>MONTHLY VISITS</label>
        <input type="number" id="num_logins" required>
    </div>

    <!-- COMPLAINTS -->
    <div class="input-field">
        <label>NUMBER OF COMPLAINTS</label>
        <input type="number" id="num_complaints" required>
    </div>

    <!-- CLASSES -->
    <div class="input-field">
        <label>CLASSES ATTENDED</label>
        <input type="number" id="num_classes_attended" required>
    </div>

    <!-- SESSION TIME -->
    <div class="input-field">
        <label>AVG SESSION TIME</label>
        <input type="number" id="avg_session_time" required>
    </div>

</div>


<button type="submit" class="predict-btn">Predict</button>

</form>

<div id="resultContainer" class="result-container">
    <div class="result-card">
        <div>
            <div class="prediction-value" id="predictionText"></div>
            <div id="badgePlaceholder"></div>
        </div>
        <div>
            <div class="prob-value" id="probabilityText"></div>
        </div>
    </div>
</div>

</div>
</main>

<script>
async function submitPrediction(){

    const data = {
    age: parseInt(document.getElementById('age').value),
    gender: document.getElementById('gender').value,
    subscription_length: parseFloat(document.getElementById('subscription_length').value),
    membership_type: parseInt(document.getElementById('membership_type').value),
    num_logins: parseInt(document.getElementById('num_logins').value),
    num_complaints: parseInt(document.getElementById('num_complaints').value),
    num_classes_attended: parseInt(document.getElementById('num_classes_attended').value),
    avg_session_time: parseFloat(document.getElementById('avg_session_time').value)
};

    try{
        const response=await fetch('/predict',{
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body:JSON.stringify(data)
        });

        const result=await response.json();
        displayResult(result);

    }catch(error){
        alert("Prediction failed.");
    }
}

function displayResult(data){

    const prediction=data.prediction || "Unknown";
    const probability=(data.probability || 0).toFixed(2)+"%";

    document.getElementById('predictionText').innerText=prediction;
    document.getElementById('probabilityText').innerText=probability;

    const badge=document.createElement('span');

    if(prediction.toLowerCase().includes("churn")){
        badge.className="churn-badge";
        badge.innerText="âš  CHURN RISK";
    }else{
        badge.className="renew-badge";
        badge.innerText="âœ“ RENEW";
    }

    const placeholder=document.getElementById('badgePlaceholder');
    placeholder.innerHTML="";
    placeholder.appendChild(badge);

    document.getElementById('resultContainer').style.display="block";
}
</script>

</body>
</html>
